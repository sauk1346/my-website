# Búsqueda avanzada usando $regex

## Ejemplos

1. **Buscar usuarios cuyo nombre comienza con "Maria"**
```js
db.usuarios.find({ nombre: {$regex: "^Maria"} })
```

2. **Buscar usuarios con email que termine en \@gmail.com**
```js
db.usuarios.find({ email:{$regex: "@gmail\\.com$"} })
```

3. **Buscar usuarios con dirección que contenga "Santiago"**
```js
db.usuarios.find({ email:{$regex:"Santiago", $options:"i"} })
```

4. **Buscar comentarios que contengas la palabra "urgente"**
```js
db.usuarios.find({ comentarios: { $elemMatch:{$regex:"urgente", $options:"i"} } })
```

# Ejercicios

## Ejercicio 01
Buscar todos los usuarios cuyo nombre contenga la letra "ñ"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "ñ" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /ñ/ } })
```
</details>


## Ejercicio 02
Filtrar los usuarios cuyo email contenga el nombre "daniela"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ email: { $regex: "daniela", $options: "i" } })
```

**Opción 02**
```js
db.usuarios.find({ email: { $regex: /daniela/i } })
```
</details>

## Ejercicio 03
Mostrar los usuarios con correo de dominio institucional .cl
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ email: { $regex: "\\.cl$" } })
```

**Opción 02**
```js
db.usuarios.find({ email: { $regex: /\.cl$/ } })
```
</details>

## Ejercicio 04
Buscar usuarios cuya dirección comience con "Avenida"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ direccion: { $regex: "^Avenida", $options: "i" } })
```

**Opción 02**
```js
db.usuarios.find({ direccion: { $regex: /^Avenida/i } })
```
</details>

## Ejercicio 05
Filtrar usuarios con direcciones que terminen en un número
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ direccion: { $regex: "[0-9]$" } })
```

**Opción 02**
```js
db.usuarios.find({ direccion: { $regex: /[0-9]$/ } })
```
</details>

## Ejercicio 06
Mostrar usuarios con algún comentario que contenga la palabra "error"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ comentarios: { $regex: "error", $options: "i" } })
```

**Opción 02**
```js
db.usuarios.find({ comentarios: { $regex: /error/i } })
```
</details>

## Ejercicio 07
Buscar usuarios cuyo correo tenga más de un punto (.)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ email: { $regex: "\\..*\\." } })
```

**Opción 02**
```js
db.usuarios.find({ email: { $regex: /\..*\./ } })
```
</details>

## Ejercicio 08
Mostrar usuarios con nombre que termine en "ez" (como Rodriguez, Ramirez)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "ez$" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /ez$/ } })
```
</details>

## Ejercicio 09
Buscar direcciones que contengan la palabra "Puerta"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ direccion: { $regex: "Puerta", $options: "i" } })
```

**Opción 02**
```js
db.usuarios.find({ direccion: { $regex: /Puerta/i } })
```
</details>

## Ejercicio 10
Filtrar usuarios con comentarios que empiecen con la letra "C"
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ comentarios: { $regex: "^C", $options: "i" } })
```

**Opción 02**
```js
db.usuarios.find({ comentarios: { $regex: /^C/i } })
```
</details>

## Ejercicio 11
Buscar usuarios cuyo nombre comience con vocal
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "^[aeiouáéíóúAEIOUÁÉÍÓÚ]" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /^[aeiouáéíóúAEIOUÁÉÍÓÚ]/ } })
```
</details>

## Ejercicio 12
Filtrar usuarios cuyo correo electrónico termine en .es
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ email: { $regex: "\\.es$" } })
```

**Opción 02**
```js
db.usuarios.find({ email: { $regex: /\.es$/ } })
```
</details>

## Ejercicio 13
Mostrar los usuarios que tengan exactamente dos palabras en el nombre
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "^[^\\s]+\\s[^\\s]+$" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /^[^\s]+\s[^\s]+$/ } })
```
</details>

## Ejercicio 14
Buscar usuarios con algún comentario que incluya una fecha (formato aproximado: dd/mm o dd-mm)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ comentarios: { $regex: "\\d{1,2}[\\/\\-]\\d{1,2}" } })
```

**Opción 02**
```js
db.usuarios.find({ comentarios: { $regex: /\d{1,2}[\/\-]\d{1,2}/ } })
```
</details>

## Ejercicio 15
Mostrar usuarios cuya dirección no contenga la palabra "calle" (sin distinguir mayúsculas)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ direccion: { $not: { $regex: "calle", $options: "i" } } })
```

**Opción 02**
```js
db.usuarios.find({ direccion: { $not: { $regex: /calle/i } } })
```
</details>

## Ejercicio 16
Filtrar usuarios que tengan comentarios que contengan signos de explamación (!)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ comentarios: { $regex: "!" } })
```

**Opción 02**
```js
db.usuarios.find({ comentarios: { $regex: /!/ } })
```
</details>

## Ejercicio 17
Buscar usuarios cuyo email tenga el nombre compuesto (con punto en medio) antes del \@
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ email: { $regex: "[^@]+\\.[^@]+@" } })
```

**Opción 02**
```js
db.usuarios.find({ email: { $regex: /[^@]+\.[^@]+@/ } })
```
</details>

## Ejercicio 18
Mostrar usuarios cuyo nombre contenga un guión (-), por ejemplo, apellidos compuestos
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "-" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /-/ } })
```
</details>

## Ejercicio 19
Filtrar usuarios que vivan en ciudades que terminen con "a" (por ejemplo: "Murcia", "Valparaíso")
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ ciudad: { $regex: "a$" } })
```

**Opción 02**
```js
db.usuarios.find({ ciudad: { $regex: /a$/ } })
```
</details>

## Ejercicio 20
Buscar usuarios cuyo nombre contenga doble letra (como "ll", "ss", "rr", etc.)
<details>
    <summary style={{color:'red'}}>Solución</summary>

<br/>
**Opción 01**
```js
db.usuarios.find({ nombre: { $regex: "([a-zA-Z])\\1" } })
```

**Opción 02**
```js
db.usuarios.find({ nombre: { $regex: /([a-zA-Z])\1/ } })
```
</details>
